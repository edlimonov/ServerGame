## –û–ø–∏—Å–∞–Ω–∏–µ
–°–µ—Ä–≤–µ—Ä –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∞—Ä–∫–∞–¥—ã (dogs & loot) –Ω–∞ C++20. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–Ω–∏–º–∞–µ—Ç HTTP‚Äë—Å–µ—Ä–≤–µ—Ä, –æ—Ç–¥–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏–≥—Ä—ã –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç REST API: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞, –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∏—Ä–∞, –¥–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–∞, –∏–≥—Ä–æ–≤–æ–π —Ç–∏–∫ –∏ —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∫–æ—Ä–¥–æ–≤. –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ (–∫–∞—Ä—Ç—ã, –¥–æ—Ä–æ–≥–∏, –∑–¥–∞–Ω–∏—è, –æ—Ñ–∏—Å—ã, —Å–æ–±–∞–∫–∏, –ª—É—Ç) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ —Ç–∞–π–º–µ—Ä—É.

## üöÄ –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã**: —Ä–∞–∑–¥–∞—á–∞ `static/` (HTML, JS, –∞—Å—Å–µ—Ç—ã) –ø–æ HTTP.
- **–ö–∞—Ä—Ç—ã**: `GET /api/v1/maps`, `GET /api/v1/maps/{id}` ‚Äî —Å–ø–∏—Å–æ–∫ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã (–¥–æ—Ä–æ–≥–∏, –∑–¥–∞–Ω–∏—è, –æ—Ñ–∏—Å—ã, —Ç–∏–ø—ã –ª—É—Ç–∞).
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–≥—Ä–µ**: `POST /api/v1/game/join` ‚Äî –≤—ã–¥–∞–µ—Ç `authToken` –∏ `playerId`.
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã**: `GET /api/v1/game/state` ‚Äî –ø–æ–∑–∏—Ü–∏–∏ –∏–≥—Ä–æ–∫–æ–≤, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Å–∫–æ—Ä–æ—Å—Ç—å, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, –æ—á–∫–∏; –∞ —Ç–∞–∫–∂–µ –ª—É—Ç –Ω–∞ –∫–∞—Ä—Ç–µ. –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`.
- **–î–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–∞**: `POST /api/v1/game/player/action` ‚Äî —Å–º–µ–Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è (`L/R/U/D` –∏–ª–∏ –ø—É—Å—Ç–æ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏).
- **–ò–≥—Ä–æ–≤–æ–π —Ç–∏–∫**: —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ç–∏–∫ –ø–æ —Ç–∞–π–º–µ—Ä—É (`--tick-period`) –ª–∏–±–æ —á–µ—Ä–µ–∑ `POST /api/v1/game/tick` –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.
- **–†–µ–∫–æ—Ä–¥—ã**: `GET /api/v1/game/records?start=0&maxItems=100` ‚Äî –≤—ã–¥–∞—á–∞ –ª–∏–¥–µ—Ä–æ–≤ –∏–∑ –ë–î.
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**: —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–π —Å–µ—Å—Å–∏–∏ –≤ —Ñ–∞–π–ª –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏/–∏–ª–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏.
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (Boost.Log) –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π —Å–µ—Ä–≤–µ—Ä–∞.

## üì¶ –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∞—Å—å –Ω–∞ Conan, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º —á–µ—Ä–µ–∑ `pip install conan==1.52.0`. –í–µ—Ä—Å–∏—è 1.51 –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞.

## –°–±–æ—Ä–∫–∞ –ø–æ–¥ Linux

–ü—Ä–∏ —Å–±–æ—Ä–∫–µ –ø–æ–¥ Linux –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ñ–ª–∞–≥–∏:
* `-s compiler.libcxx=libstdc++11`
* `-s build_type=???`

–í–æ—Ç –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Release –∏ Debug:
```
# mkdir -p build-release 
# cd build-release
# conan install .. --build=missing -s build_type=Release -s compiler.libcxx=libstdc++11
# cmake .. -DCMAKE_BUILD_TYPE=Release
# cd ..

# mkdir -p build-debug
# cd build-debug
# conan install .. --build=missing -s build_type=Debug -s compiler.libcxx=libstdc++11
# cmake .. -DCMAKE_BUILD_TYPE=Debug
# cd ..

```

## –ó–∞–ø—É—Å–∫ –¥–æ–∫–µ—Ä–∞

–ú–æ–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (–≤–µ—Ä–Ω–µ–µ, –¥–≤—É–º—è) –≤ –¥–æ–∫–µ—Ä–µ. –î–µ–ª–∞–µ—Ç—Å—è —ç—Ç–æ —Ç–∞–∫:

```
docker build -t my_http_server .
docker run --rm -p 80:8080 my_http_server
```

–ò–∑ –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–∞ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –≤—Å–µ –¥–µ—Ç–∞–ª–∏ —Å–±–æ—Ä–∫–∏ –∑–∞–ø—É—Å–∫–∞, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –∏–¥—ë—Ç –Ω–µ —Ç–∞–∫ –ª–æ–∫–∞–ª—å–Ω–æ.

## –ó–∞–ø—É—Å–∫

–í –ø–∞–ø–∫–µ `build` –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
```sh
bin/game_server ../data/config.json ../static/
```
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
* http://127.0.0.1:8080/api/v1/maps –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç –∏
* http://127.0.0.1:8080/api/v1/map/map1 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞—Ä—Ç–µ `map1`
* http://127.0.0.1:8080/ –¥–ª—è —á—Ç–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–≤ –∫–∞—Ç–∞–ª–æ–≥–µ static)

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **–°–µ—Ç–µ–≤–æ–π —Å–ª–æ–π**: Boost.Asio + Boost.Beast ‚Äî –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π HTTP‚Äë—Å–µ—Ä–≤–µ—Ä, `Listener`/`Session`, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö, `strand` –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ API‚Äë–ª–æ–≥–∏–∫–∏.
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: `RequestHandler` –¥–µ–ª–∏—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ `/api/*` –∏ —Å—Ç–∞—Ç–∏–∫—É. API –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `api_handler` (–≤–∞–ª–∏–¥–∞—Ü–∏—è, JSON‚Äë–æ—Ç–≤–µ—Ç—ã), —Å—Ç–∞—Ç–∏–∫–∞ ‚Äî –≤ `file_handler`.
- **–ò–≥—Ä–æ–≤–∞—è –º–æ–¥–µ–ª—å**: –º–æ–¥—É–ª—å `model` (–∫–∞—Ä—Ç—ã, –¥–æ—Ä–æ–≥–∏, —Å–æ–±–∞–∫–∏, —Å–µ—Å—Å–∏–∏, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª—É—Ç–∞, —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è). –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∏—Ä–∞ –≤ `Game::UpdateTickState`, —Å–±–æ—Ä –ª—É—Ç–∞, —Ä–∞–∑–≥—Ä—É–∑–∫–∞ –≤ –æ—Ñ–∏—Å–∞—Ö, ¬´–≤—ã—Ö–æ–¥ –Ω–∞ –ø–µ–Ω—Å–∏—é¬ª –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–±–∞–∫.
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ç–∏–∫–æ–≤**: `Ticker` –Ω–∞ Asio —Ç–∞–π–º–µ—Ä–µ, –ø–µ—Ä–∏–æ–¥ –∑–∞–¥–∞–µ—Ç—Å—è `--tick-period`. –í —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ —Ç–∏–∫ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ REST. –í –∏–≥—Ä–æ–≤–æ–º —Ä–µ–∂–∏–º–µ —Ç–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**:
  - –§–∞–π–ª —Å–æ—Å—Ç–æ—è–Ω–∏—è: Boost.Serialization (loot, dogs, sessions, players).
  - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL (libpqxx) —á–µ—Ä–µ–∑ `ConnectionPool`; —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤ (`postgres::DB`).
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ JSON (`data/config.json`) —á–µ—Ä–µ–∑ `json_loader`.
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: Boost.Log —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ (–∫–æ–¥, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞, content‚Äëtype –∏ –ø—Ä.).
- **–°–±–æ—Ä–∫–∞**: CMake + Conan (Boost, libpqxx). –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª `game_server`, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `game_lib`.
- **–ó–∞–ø—É—Å–∫**: –ø–∞—Ä–∞–º–µ—Ç—Ä—ã CLI —á–µ—Ä–µ–∑ Boost.Program_options: `--config-file`, `--www-root`, `--tick-period`, `--randomize-spawn-points`, `--state-file`, `--save-state-period`.
